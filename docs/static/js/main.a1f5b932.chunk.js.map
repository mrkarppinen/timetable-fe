{"version":3,"sources":["services/timetable-service.js","actions/index.js","presentation/Time.js","presentation/Departure.js","presentation/ListItem.js","services/storage.js","presentation/StopForm.js","presentation/AddNew.js","containers/AddNewContainer.js","presentation/List.js","containers/ListContainer.js","presentation/Display.js","containers/DisplayScheduleContainer.js","containers/Root.js","reducers/index.js","store/index.js","index.js"],"names":["timeTableclient","TimetableClient","loadFromApi","id","promises","Promise","resolve","get","formattedDate","map","all","then","arr","timetables","date","arguments","length","undefined","Date","day","getDate","month","getMonth","year","getFullYear","substr","concat","fetchingTimetablesDone","type","_parseHour","time","hour","Math","floor","slice","_parseMinute","Time","_ref","value","minute","react_default","a","createElement","Fragment","Line","styled","small","_templateObject","Departure","lines","presentation_Time","join","ListItem","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","departures","timetable","getDepartures","setState","_this2","className","onClick","history","push","index","style","cursor","title","display","justifyContent","item","key","presentation_Departure","lib_default","timeout","enabled","callback","update","count","now","getHours","getMinutes","filter","React","Component","withRouter","Storage","separator","stops","window","localStorage","getItem","split","getStops","saveIds","indexOf","splice","setItem","Form","form","StopForm_templateObject","AddButton","button","_templateObject2","StopForm","onSubmit","name","Button","AddNew_templateObject","AddNew","displayForm","toggleForm","bind","assertThisInitialized","event","preventDefault","target","stopId","trim","onAdd","addStop","toggleButtonClass","toggleButtonValue","marginTop","presentation_StopForm","connect","dispatch","loadTimetable","data","catch","err","console","error","fetchOneTimetable","ListDiv","div","List_templateObject","List","loading","presentation_ListItem","assign","AddNewContainer","list","Container","Display_templateObject","DisplaySchedule","loaded","match","params","stop","Root","log","storage","onMount","HashRouter","Switch","Route","path","component","DisplayScheduleContainer","ListContainer","ids","fetchTimetables","rootReducer","combineReducers","loadingOne","action","objectSpread","store","createStore","applyMiddleware","thunk","ReactDOM","render","es","containers_Root","document","getElementById"],"mappings":"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","file":"static/js/main.a1f5b932.chunk.js","sourcesContent":["import TimetableClient from 'timetable-client';\n \nconst timeTableclient = new TimetableClient();\n\nconst loadTimetable = (id) => {\n    return fetch(`http://localhost:3001/api/line?stop=${id}`)\n    .then( res => res.json() );\n};\n\n\nconst loadFromApi = (id) => {\n    const promises = typeof id === 'string' ? [Promise.resolve(timeTableclient.get(id, formattedDate()))] : id.map( id => Promise.resolve(timeTableclient.get(id, formattedDate())) );\n    return Promise.all(promises).then( arr => ({timetables: arr}) );\n};\n\n\nconst formattedDate = (date = new Date()) => {\n    let day = date.getDate();\n    let month = date.getMonth() + 1;\n    let year = date.getFullYear();\n\n    day = ('0' + day).substr(-2);\n    month = ('0'+month).substr(-2); \n\n    return `${year}${month}${day}`;\n};\n\n\n\nexport {loadFromApi as loadTimetable};","import {loadTimetable} from '../services/timetable-service';\n\nexport const FETCH_TIMETABLES_START = \"feth_timetables_start\";\nexport const FETCH_TIMETABLES = \"fetch_timetables\";\nexport const FETCH_TIMETABLES_DONE = \"fetch_timetables_done\";\nexport const FETCH_ONE_START = \"fetch_one_start\";\n\n\n\nconst startFetchingTimetables = () => {\n    return {\n        type: FETCH_TIMETABLES_START\n    };\n};\n\nconst startFetchingOne = () => {\n    return {\n        type: FETCH_ONE_START\n    };\n};\n\nconst fetchingTimetablesDone = (timetables = []) => {\n    return {\n        type: FETCH_TIMETABLES_DONE,\n        timetables\n    };\n}\n\nexport const fetchTimetables = (ids) => {\n    return dispatch => {\n        dispatch(startFetchingTimetables());\n        return loadTimetable(ids)\n        .then( data => {\n            dispatch(fetchingTimetablesDone(data.timetables));\n        })\n        .catch( err => {\n            console.error(err);\n            dispatch(fetchingTimetablesDone());\n        });\n    };\n};\n\nexport const fetchOneTimetable = (id) => {\n    return dispatch => {\n        dispatch(startFetchingOne());\n        return loadTimetable(id)\n        .then( data => {\n            dispatch(fetchingTimetablesDone(data.timetables));\n        })\n        .catch( err => {\n            console.error(err);\n            dispatch(fetchingTimetablesDone());\n        });\n    };\n};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Time = ({value}) => {\n    const hour = _parseHour(value);\n    const minute = _parseMinute(value);\n    return (\n        <React.Fragment>\n            {hour}:{minute}\n        </React.Fragment>    \n    );\n};\n\nTime.propTypes = {\n    value: PropTypes.number\n}\n\nconst _parseHour = (time) => {\n        let hour = Math.floor(time / 60 / 60);\n        hour = (hour >= 24) ? hour-24 : hour;\n        return (`0${hour}`).slice(-2);\n      }\n    \nconst _parseMinute = (time) => {\n        return (`0${Math.floor((time / 60) % 60)}`).slice(-2);\n      }\n\n\n\nexport default Time;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport Time from './Time';\n\n\nconst Line = styled.small`\n    font-size: 0.75rem;\n    font-style: italic;\n`;\n\nconst Departure = ({time, lines}) => (\n    <React.Fragment>\n        <Time value={time} /><Line>{lines.join()}</Line>\n    </React.Fragment>\n);\n\nDeparture.propTypes = {\n    time: PropTypes.number.isRequired,\n    lines: PropTypes.array.isRequired\n};\n\nexport default Departure;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactInterval from 'react-interval';\nimport Departure from './Departure';\nimport { withRouter } from 'react-router-dom'\n\nclass ListItem extends React.Component {\n\n    static propTypes = {\n        title: PropTypes.string.isRequired,\n        id: PropTypes.string.isRequired\n    };\n\n    constructor(props){\n        super(props);\n\n        this.state = {\n            departures: this.props.timetable ? this.getDepartures(this.props.timetable, new Date(), 3) : []\n        }\n    }\n\n    update(){\n        this.setState({\n            departures: this.props.timetable ? this.getDepartures(this.props.timetable, new Date(), 3) : []\n        });\n    }\n     \n    \n      render(){\n          const {departures} = this.state;\n\n        return(\n            <div className=\"list-item\">\n                <h2 onClick={ () => { this.props.history.push('/stop/'+this.props.index)  } } style={{cursor: 'pointer'}} >{this.props.title} ({this.props.id})</h2>\n                <div style={{display: 'flex', justifyContent: 'space-evenly' }} >\n                    { departures.length>0 && departures.map( item => <div key={item.time} ><Departure time={item.time} lines={item.lines} /></div> )}\n                </div>\n                <ReactInterval timeout={1000} enabled={true}\n                callback={() => this.update() } />\n            </div>\n        )\n\n    }\n\n\n    getDepartures(timetable, date, count) {\n        let now =  ( (date.getHours() * 60 ) + date.getMinutes() ) * 60;\n    \n        let departures = timetable\n        .filter( (item) => {\n          return item.time > now;\n        });\n    \n    \n        return departures.slice(0, count);\n      }\n    \n \n      \n}    \n\nexport {ListItem};\nexport default withRouter(ListItem);\n","export default class Storage {\n\n    constructor (){\n        this.key = 'stops';\n        this.separator = ';';\n      }\n    \n      getStops() {\n          let stops = window.localStorage.getItem(this.key);\n          return (stops == null || stops.length === 0) ? [] : stops.split(this.separator);\n      }\n    \n    \n     addStop (id){\n       let stops = this.getStops();\n    \n       stops.push(id);\n       this.saveIds(stops);\n     }\n    \n     delete (id){\n       let stops = this.getStops();\n       let index = stops.indexOf(id);\n    \n       stops.splice(index,1);\n       this.saveIds(stops);\n     }\n    \n     saveIds(stops){\n       window.localStorage.setItem(this.key, stops.join(this.separator) );\n     }\n    \n\n}","\nimport React from 'react';\nimport styled from 'styled-components';\nimport PropTypes from 'prop-types';\n\nconst Form = styled.form`\n    display: flex;\n    flex-direction: column;\n    margin: auto;\n    margin-top: 1rem;\n    width: 150px;\n\n    input, button {\n        margin-bottom: 1rem;\n    }\n\n    input {\n        text-align: center;\n        border: none;\n        border-bottom: 1px solid #ccc;\n    }\n`;\n\nconst AddButton = styled.button`\n    background: none;\n    /*border: 1px solid #ccc;\n    border-radius: 15px;*/\n    border: none;\n    padding: 1rem;\n\n    :focus {\n        outline: none;\n    }\n`;\n\n\nconst StopForm = ({onSubmit}) => (\n    <Form id=\"add-form\" onSubmit={ onSubmit } >\n                    <input type=\"text\" name=\"stopId\"  />\n                    <AddButton id=\"submit-form\" type=\"submit\" >Add</AddButton> \n    </Form>\n);\n\nStopForm.propTypes = {\n    onSubmit: PropTypes.func.isRequired\n};\n\nexport default StopForm;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Storage from '../services/storage';\nimport styled from 'styled-components';\nimport StopForm from './StopForm';\n\nconst Button = styled.button`\n    width: 100px;\n    height: 40px;\n    background: none;\n    /*border: 1px solid #ccc;\n    border-radius: 10px;*/\n    border: none;\n    color: #ccc;\n    font-size: 1.5rem;\n\n    :focus{\n        outline: none;\n    }\n\n`;\n\n\n\nexport default class AddNew extends React.Component {\n\n    static propTypes = {\n        onAdd: PropTypes.func.isRequired\n    };\n\n    constructor(props){\n        super(props);\n\n        this.state = {\n            displayForm: false\n        };\n\n        this.toggleForm = this.toggleForm.bind(this);\n        this.onSubmit  = this.onSubmit.bind(this);\n    }\n\n    \n    toggleForm(){ this.setState({displayForm: !this.state.displayForm }) };\n\n    onSubmit(event)  { \n        event.preventDefault(); \n        const id = event.target.stopId.value;\n        if (id.trim().length > 0){\n            this.props.onAdd(id); \n            new Storage().addStop(id);  \n        }\n        event.target.stopId.value = '';  \n        this.toggleForm();\n\n    \n    };\n\n    render(){    \n        const toggleButtonClass = this.state.displayForm ? 'close-form' : 'open-form';\n        const toggleButtonValue = this.state.displayForm ? '-' : '+';\n\n        return (\n            <div className=\"new-form\" style={{marginTop: '1rem'}}  >\n                <div><Button id={toggleButtonClass} type=\"button\" onClick={ this.toggleForm } >{toggleButtonValue}</Button></div>\n                {  this.state.displayForm && <StopForm onSubmit={ this.onSubmit } /> }\n            </div>\n            );\n    }\n\n};\n","import {connect } from 'react-redux';\nimport AddNew from '../presentation/AddNew';\nimport { fetchOneTimetable } from '../actions';\n\nconst mapStateToProps = state => ({ });\nconst mapDispatchToProps = dispatch => {\n    return {\n        onAdd: (id) =>  { dispatch(fetchOneTimetable(id)) }\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddNew);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from './ListItem';\nimport AddNewContainer from '../containers/AddNewContainer';\nimport styled from 'styled-components';\n\nconst ListDiv = styled.div`\n    display: flex;\n    text-align: center;\n    flex-direction: column;\n`;\n\nconst List = ({loading, timetables}) => {\n    \n    return (\n        <ListDiv className=\"list\" >   \n            { loading && <div id=\"loading\" >Loading....</div>}\n            { !loading && timetables.map( (timetable, index) => <ListItem key={timetable.title} {...timetable} index={index} /> ) }\n            <AddNewContainer />\n        </ListDiv>\n    );\n};\n\nList.propTypes = {\n    timetables: PropTypes.arrayOf(PropTypes.shape({title: PropTypes.string, timetable: PropTypes.array })),\n    loading: PropTypes.bool.isRequired\n};\n\nexport default List;\n","import List from '../presentation/List';\nimport {connect} from 'react-redux';\n\nconst mapStateToProps = state => {\n    return {\n        loading: state.timetable.loading,\n        timetables: state.timetable.list\n    };\n};\n\nconst mapDispatchToProps = dispatch => ({});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(List);","import React from 'react';\nimport Departure from './Departure';\nimport styled from 'styled-components';\n\nconst Container = styled.div`\ndisplay: flex;\nflex-direction: column;\nh1 {\n    text-align: center;\n}\n\ndiv {\n    width: 50px;\n    margin: auto;\n}\n`;\n\n\nconst DisplaySchedule = ({title, loaded, timetable, id}) => (\n    <div>\n    {!loaded && <div>Loading...</div> }\n    {loaded && <Container>\n        <h1>{title} ({id})</h1>\n        {timetable.map( item => <div key={item.time}><Departure time={item.time} lines={item.lines} /></div>) }\n    </Container> }\n    </div>\n);\n\nexport default DisplaySchedule;","import { connect } from 'react-redux';\nimport DisplaySchedule from '../presentation/Display';\n\nconst mapStateToProps = (state, props) => {\n    const id = props.match.params.id;\n    let loaded = false;\n    let stop = {title: '', timetable: [], id: ''};\n    if (state.timetable.list && state.timetable.list.length > 0){\n        stop = state.timetable.list[id];\n        loaded = true;\n\n    }\n    return { \n        title: stop.title,\n        timetable: stop.timetable,\n        loaded: loaded,\n        id: stop.id\n     }\n};\n\nconst mapDispatchToProps = () => {\n    return {};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DisplaySchedule);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { fetchTimetables } from '../actions';\nimport {connect} from 'react-redux';\nimport ListContainer from './ListContainer';\nimport Storage from '../services/storage';\nimport DisplayScheduleContainer from '../containers/DisplayScheduleContainer';\n\nimport {\n  HashRouter as Router,\n  Route,\n  Switch\n} from 'react-router-dom'\n\n\n\nclass Root extends Component {\n\n  static propTypes = {\n    onMount: PropTypes.func.isRequired\n  }\n\n  constructor(props){\n    super(props);\n\n  }\n\n  componentDidMount(){\n    console.log('loading');\n    const storage = new Storage();\n    if (storage.getStops().length > 0)\n      this.props.onMount(storage.getStops());\n  }\n\n  render() {\n    return (\n      <Router>\n      <div className=\"app\">\n        <Switch>\n        <Route path=\"/stop/:id?\" component={DisplayScheduleContainer} />\n        <Route path=\"*\" component={ListContainer}/>\n        </Switch>\n      </div>\n      </Router>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({});\nconst mapDispatchToProps = dispatch => {\n  return {\n    onMount: (ids) => dispatch(fetchTimetables(ids))\n  };\n};\n\nexport { Root };\nexport default connect(mapStateToProps, mapDispatchToProps)(Root);\n","import { FETCH_TIMETABLES_START, FETCH_TIMETABLES_DONE, FETCH_ONE_START } from '../actions';\nimport { combineReducers } from 'redux';\n\nconst timetable = (state = {loading: false, list: [], loadingOne: false}, action) => {\n    switch(action.type) {\n        case FETCH_TIMETABLES_START:\n            return {loading: true, list: [], loadingOne: false};\n        case FETCH_TIMETABLES_DONE:\n            return { loading: false, list: state.list.concat(action.timetables), loadingOne: false };\n        case FETCH_ONE_START: \n            return { ...state, loadingOne: true }            \n        default:\n            return state;\n    };\n};\n\nconst rootReducer = combineReducers({timetable});\nexport default rootReducer;","import { createStore, applyMiddleware } from 'redux'\nimport rootReducer from '../reducers';\nimport thunk from 'redux-thunk';\n\nconst store = createStore(rootReducer, applyMiddleware(thunk));\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Root from './containers/Root';\nimport {Provider} from 'react-redux';\nimport store from './store';\n\n\nReactDOM.render(\n<Provider store={store}>\n    <Root />\n</Provider>\n, document.getElementById('root'));\n\n\n"],"sourceRoot":""}